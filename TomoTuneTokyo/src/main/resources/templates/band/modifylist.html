<!DOCTYPE html>

<html lang="ja" xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultrag.net.nz/thymeleaf/layout"
  layout:decorate="~{layouts/layout}">

<head>
  <title>ãƒãƒ³ãƒ‰ãƒªã‚¹ãƒˆ</title>
  <link rel="stylesheet" href="/css/board-style.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body>
  <div layout:fragment="content" class="board-container">
    <div class="recruit-post-btn-wrap">
      <button type="button" class="recruit-post-btn" data-toggle="modal" data-target="#applyModal">ãƒãƒ³ãƒ‰çµæˆç™»éŒ²</button>
    </div>
    <h2 class="board-title">ãƒãƒ³ãƒ‰ãƒªã‚¹ãƒˆ</h2>

<!-- ğŸ” ê²€ìƒ‰ì°½ -->
<div class="search-bar">
  <input type="text" class="search-input" placeholder="ãƒãƒ¼ãƒ å or ãƒã‚¸ã‚·ãƒ§ãƒ³æ¤œç´¢">
  <button class="search-btn">æ¤œç´¢</button>
</div>

<!-- í•´ì‹œíƒœê·¸ ì„ íƒ ì˜ì—­ -->
<div class="selected-tags-title"># è‡ªåˆ†ã®å¥½ã¿ã§ã‚ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢</div>
<div class="selected-tags"></div>
<div class="keyword-box">
  <div class="keyword-row">
    <div class="keyword-category">ã‚¸ãƒ£ãƒ³ãƒ«</div>
    <div class="keyword-tags">
      <span class="tag">ãƒ­ãƒƒã‚¯</span>
      <span class="tag">ãƒãƒƒãƒ—</span>
      <span class="tag">ã‚¸ãƒ£ã‚º</span>
      <span class="tag">ãƒ’ãƒƒãƒ—ãƒ›ãƒƒãƒ—</span>
      <span class="tag">ã‚¯ãƒ©ã‚·ãƒƒã‚¯</span>
      <span class="tag">EDM</span>
      <span class="tag">ãã®ä»–</span>
    </div>
  </div>
  <div class="keyword-row">
    <div class="keyword-category">ãƒã‚¸ã‚·ãƒ§ãƒ³</div>
    <div class="keyword-tags">
      <span class="tag">Voï¼ˆãƒœãƒ¼ã‚«ãƒ«ï¼‰</span>
      <span class="tag">Gtï¼ˆã‚®ã‚¿ãƒ¼ï¼‰</span>
      <span class="tag">Baï¼ˆãƒ™ãƒ¼ã‚¹ï¼‰</span>
      <span class="tag">Drï¼ˆãƒ‰ãƒ©ãƒ ï¼‰</span>
      <span class="tag">Kbï¼ˆã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼‰</span>
      <span class="tag">ãã®ä»–</span>
    </div>
  </div>
  <div class="keyword-row">
    <div class="keyword-category">æ€§åˆ¥</div>
    <div class="keyword-tags">
      <span class="tag">ç”·æ€§ãƒãƒ³ãƒ‰</span>
      <span class="tag">å¥³æ€§ãƒãƒ³ãƒ‰</span>
      <span class="tag">æ··æˆãƒãƒ³ãƒ‰</span>
    </div>
  </div>
  <div class="keyword-row">
    <div class="keyword-category">å¹´é½¢ä»£</div>
    <div class="keyword-tags">
      <span class="tag">10ä»£</span>
      <span class="tag">20ä»£</span>
      <span class="tag">30ä»£</span>
      <span class="tag">40ä»£</span>
      <span class="tag">50ä»£ä»¥ä¸Š</span>
    </div>
  </div>
</div>

<!-- ì¹´ë“œ ëª©ë¡ -->
<div class="board-card-grid">
  <div class="board-card">
    <a th:href="@{/port/modify}">
      <img src="/images/ChatGPT1.png" alt="ì¸ë„¤ì¼" class="card-image">
    </a>
    <div class="card-info">
      <h3 class="card-title">Tomo Groove</h3>
      <p class="card-summary">ë„ì¿„ì™€ í™ëŒ€ë¥¼ ì˜¤ê°€ëŠ” ê°ì„± ì‹œí‹°íŒ ë°´ë“œì…ë‹ˆë‹¤ ğŸ·</p>
      <p class="card-meta">ê°€ë¬´ | 2025.04.21 | ãƒ’ãƒƒãƒˆæ•° 15</p>
    </div>
  </div>

  <div class="board-card">
    <img src="/images/ChatGPT2.png" alt="ì¸ë„¤ì¼" class="card-image">
    <div class="card-info">
      <h3 class="card-title">Blue Morning</h3>
      <p class="card-summary">ììœ ë¥¼ ì¶”êµ¬í•˜ëŠ” ìš°ë¦¬ëŠ” ë©‹ì§„ ë°´ë“œ!</p>
      <p class="card-meta">ìœ ë‚˜ | 2025.04.20 | ãƒ’ãƒƒãƒˆæ•° 7</p>
    </div>
  </div>

  <div class="board-card">
    <img src="/images/ChatGPT3.png" alt="ì¸ë„¤ì¼" class="card-image">
    <div class="card-info">
      <h3 class="card-title">Voã¨Keyæ€¥å‹Ÿ</h3>
      <p class="card-summary">ì—°ìŠµì‹¤ ì™„ë¹„, ì›” 2íšŒ ì—°ìŠµ, ê³µì—° ê²½í—˜ å¤š ë°´ë“œ~</p>
      <p class="card-meta">íƒ€ì¼€ì‹œ | 2025.04.18 | ãƒ’ãƒƒãƒˆæ•° 10</p>
    </div>
  </div>

  <div class="board-card">
    <img src="/images/ChatGPT4.png" alt="ì¸ë„¤ì¼" class="card-image">
    <div class="card-info">
      <h3 class="card-title">LET ME KNOW</h3>
      <p class="card-summary">í•©ì£¼ ìœ„ì£¼ë¡œ íˆ¬ì–´ë¥¼ ë„ëŠ” ìš°ë¦¬ì•¼ ë°´ë“œ!</p>
      <p class="card-meta">í•˜ë‚˜ë¯¸ | 2025.04.17 | ãƒ’ãƒƒãƒˆæ•° 6</p>
    </div>
  </div>

  <div class="board-card">
    <img src="/images/ChatGPT1.png" alt="ì¸ë„¤ì¼" class="card-image">
    <div class="card-info">
      <h3 class="card-title">King Gnu Cover</h3>
      <p class="card-summary">R&B/ì†Œìš¸ ìŠ¤íƒ€ì¼ì˜ ì»¤ë²„ë¥¼ ì¤‘ì ìœ¼ë¡œ í•˜ëŠ” ë°´ë“œì…ë‹ˆë‹¤.</p>
      <p class="card-meta">í† ëª¨ | 2025.04.15 | ãƒ’ãƒƒãƒˆæ•° 12</p>
    </div>
  </div>
  <div class="board-card">
    <img src="/images/ChatGPT2.png" alt="ì¸ë„¤ì¼" class="card-image">
    <div class="card-info">
      <h3 class="card-title">RADWIMPS ì»¤ë²„ë°´ë“œ</h3>
      <p class="card-summary">ìì‘ê³¡ ë…¹ìŒ ì˜ˆì •ì¸ ì¸ë”” ë°´ë“œì…ë‹ˆë‹¤!</p>
      <p class="card-meta">Indigo | 2025.04.13 | ãƒ’ãƒƒãƒˆæ•° 9</p>
    </div>
  </div>
  
  <!-- âœ… ë°´ë“œ ê²°ì„± ë“±ë¡ ëª¨ë‹¬ -->
<div class="modal fade" id="applyModal" tabindex="-1" role="dialog" aria-labelledby="applyModalLabel">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title" id="applyModalLabel">ãƒãƒ³ãƒ‰çµæˆç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ </h4>
      </div>
      <div class="modal-body">
		<form id="applyForm" method="post" action="/bandinsert/bandsinsert" enctype="multipart/form-data">
			<div id="page1">
			  <div class="form-group">
			    <label for="bandName">ãƒãƒ³ãƒ‰å</label>
			    <input type="text" class="form-control" id="bandName" name="band_name" placeholder="ä¾‹: Tomato Groove">
			  </div>

		  <div class="form-group">
		    <label for="formationDate">çµæˆæ—¥</label>
		    <input type="date" class="form-control" id="formationDate" name="formation_date">
		  </div>

		  <div class="form-group">
		    <label for="bandIntro">ç´¹ä»‹æ–‡</label>
		    <textarea class="form-control" id="bandIntro" name="band_intro" rows="3" placeholder="ãƒãƒ³ãƒ‰ç´¹ä»‹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
		  </div>

		  <div class="form-group">
		    <label>ã‚¸ãƒ£ãƒ³ãƒ«ãƒ»ãƒã‚¸ã‚·ãƒ§ãƒ³ãƒ»æ€§åˆ¥ãƒ»å¹´é½¢ä»£</label>
		    <div class="keyword-box">
		      <div class="keyword-row">
		        <div class="keyword-category">ã‚¸ãƒ£ãƒ³ãƒ«</div>
		        <div class="keyword-tags" id="genre-tags">
		          <span class="tag">ãƒ­ãƒƒã‚¯</span>
		          <span class="tag">ãƒãƒƒãƒ—</span>
		          <span class="tag">ã‚¸ãƒ£ã‚º</span>
		          <span class="tag">ãƒ’ãƒƒãƒ—ãƒ›ãƒƒãƒ—</span>
		          <span class="tag">ã‚¯ãƒ©ã‚·ãƒƒã‚¯</span>
		          <span class="tag">EDM</span>
		          <span class="tag">ãã®ä»–</span>
		        </div>
		      </div>
		      <div class="keyword-row">
		        <div class="keyword-category">ãƒã‚¸ã‚·ãƒ§ãƒ³</div>
		        <div class="keyword-tags" id="position-tags">
		          <span class="tag">Voï¼ˆãƒœãƒ¼ã‚«ãƒ«ï¼‰</span>
		          <span class="tag">Gtï¼ˆã‚®ã‚¿ãƒ¼ï¼‰</span>
		          <span class="tag">Baï¼ˆãƒ™ãƒ¼ã‚¹ï¼‰</span>
		          <span class="tag">Drï¼ˆãƒ‰ãƒ©ãƒ ï¼‰</span>
		          <span class="tag">Kbï¼ˆã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼‰</span>
		          <span class="tag">ãã®ä»–</span>
		        </div>
		      </div>
		      <div class="keyword-row">
		        <div class="keyword-category">æ€§åˆ¥</div>
		        <div class="keyword-tags" id="gender-tags">
		          <span class="tag">ç”·æ€§ãƒãƒ³ãƒ‰</span>
		          <span class="tag">å¥³æ€§ãƒãƒ³ãƒ‰</span>
		          <span class="tag">æ··æˆãƒãƒ³ãƒ‰</span>
		        </div>
		      </div>
		      <div class="keyword-row">
		        <div class="keyword-category">å¹´é½¢ä»£</div>
		        <div class="keyword-tags" id="age-tags">
		          <span class="tag">10ä»£</span>
		          <span class="tag">20ä»£</span>
		          <span class="tag">30ä»£</span>
		          <span class="tag">40ä»£</span>
		          <span class="tag">50ä»£ä»¥ä¸Š</span>
		        </div>
		      </div>
		    </div>
		  </div>

		  <div class="form-group">
		    <label for="region">æ´»å‹•åœ°åŸŸ</label>
		    <input type="text" class="form-control" id="region" name="region" placeholder="ä¾‹: ã‚½ã‚¦ãƒ«å¼˜å¤§ã€æ±äº¬æ¸‹è°·">
		  </div>

		  <div class="form-group">
		    <label for="bandEmail">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
		    <input type="email" class="form-control" id="bandEmail" name="bandEmail" placeholder="ä¾‹: band@example.com" required>
		  </div>

		  <input type="hidden" name="selectedGenres" id="selectedGenres">
		  <input type="hidden" name="selectedPositions" id="selectedPositions">
		  <input type="hidden" name="selectedGenders" id="selectedGenders">
		  <input type="hidden" name="selectedAges" id="selectedAges">

		  <div class="text-center">
		    <button type="button" class="btn btn-primary" id="nextPage">æ¬¡ã¸</button>
		  </div>
		</div>

		<!-- 2í˜ì´ì§€ -->
		<div id="page2" style="display:none;">
		  <div class="form-group">
		    <label for="leaderComment">ãƒªãƒ¼ãƒ€ãƒ¼ã®ã‚³ãƒ¡ãƒ³ãƒˆ</label>
		    <textarea class="form-control" id="leaderComment" name="leader_comment" rows="2" placeholder="ãƒªãƒ¼ãƒ€ãƒ¼ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"></textarea>
		  </div>

		  <div class="form-group">
		    <label for="bandProfileImage">ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ</label>
		    <input type="file" class="form-control" id="bandProfileImage" name="bandProfileImage" accept="image/*">
		  </div>

		  <div class="form-group">
		    <label for="bandCoverImage">ãƒãƒ³ãƒ‰ã‚«ãƒãƒ¼ç”»åƒ</label>
			<input type="file" class="form-control" id="bandCoverImage" name="bandCoverImage" accept="image/*">
		  </div>

		  <div class="form-group">
		    <label for="youtubeLink">YouTubeãƒªãƒ³ã‚¯</label>
		    <input type="url" class="form-control" id="youtubeLink" name="youtube_link" placeholder="https://www.youtube.com/@channel">
		  </div>

		  <div class="form-group">
		    <label for="instagramLink">Instagramãƒªãƒ³ã‚¯</label>
		    <input type="url" class="form-control" id="instagramLink" name="instagram_link" placeholder="https://www.instagram.com/yourband">
		  </div>

		  <div class="member-input-group leader-member">
		    <label>ãƒªãƒ¼ãƒ€ãƒ¼</label>
		    <button type="button" class="btn btn-sm btn-outline-primary mb-2 search-leader-btn" style = "margin-bottom: 15px;">ğŸ” ãƒªãƒ¼ãƒ€ãƒ¼æ¤œç´¢</button>

		    <div class="selected-leader-info mb-2"></div>

		    <input type="text" name="stage_name" class="form-control mb-2" placeholder="ä¾‹: ãƒªãƒ¼ãƒ€ãƒ¼å">
		    <input type="hidden" name="photo">

		    <input type="text" name="member_position" class="form-control mb-2" placeholder="ãƒã‚¸ã‚·ãƒ§ãƒ³: ãƒªãƒ¼ãƒ€ãƒ¼, ãƒ—ãƒ­ãƒ‡ãƒ¥ãƒ¼ã‚µãƒ¼">
		    <input type="text" name="member_mbti" class="form-control mb-2" placeholder="MBTI: INTJ">
		    <input type="text" name="favorite_band" class="form-control mb-2" placeholder="å¥½ããªãƒãƒ³ãƒ‰: DAY6">
		    <input type="text" name="member_motto" class="form-control" placeholder="ä¸€è¨€: éŸ³æ¥½ã¯çœŸå®Ÿã§ã™">
		  </div>

		  <div class="text-center">
		    <button type="button" class="btn btn-default" id="prevPage">ä»¥å‰ã¸</button>
		    <button type="button" class="btn btn-primary" id="toPage3">æ¬¡ã¸</button>
		  </div>
		</div>
		<!-- 3í˜ì´ì§€ -->
		<div id="page3" style="display:none;">
			<div id="general-members">
			  <div class="member-input-group general-member">
			    <label>ãƒ¡ãƒ³ãƒãƒ¼1</label>
			    <button type="button" class="btn btn-sm btn-outline-primary mb-2 search-member-btn" data-index="0" style="margin-bottom: 10px; font-size: 15px;">
			      ğŸ” ãƒ¡ãƒ³ãƒãƒ¼æ¤œç´¢
			    </button>
			    <div class="selected-member-info mb-2" data-index="0"></div>
			    <input type="text" name="stage_name[]" class="form-control mb-2" placeholder="ä¾‹: ãƒ¡ãƒ³ãƒãƒ¼å">
			    <input type="text" name="member_position[]" class="form-control mb-2" placeholder="ãƒã‚¸ã‚·ãƒ§ãƒ³: ãƒœãƒ¼ã‚«ãƒ«">
			    <input type="text" name="member_mbti[]" class="form-control mb-2" placeholder="MBTI: ENFP">
			    <input type="text" name="favorite_band[]" class="form-control mb-2" placeholder="å¥½ããªãƒãƒ³ãƒ‰: Aimer">
			    <input type="text" name="member_motto[]" class="form-control" placeholder="ä¸€è¨€: æ­Œã§ä¼ãˆãŸã„">
			  </div>

			  <div class="member-input-group general-member">
			    <label>ãƒ¡ãƒ³ãƒãƒ¼2</label>
			    <button type="button" class="btn btn-sm btn-outline-primary mb-2 search-member-btn" data-index="1" style="margin-bottom: 10px; font-size: 15px;">
			      ğŸ” ãƒ¡ãƒ³ãƒãƒ¼æ¤œç´¢
			    </button>
			    <div class="selected-member-info mb-2" data-index="1"></div>
			    <input type="text" name="stage_name[]" class="form-control mb-2" placeholder="ä¾‹: ãƒ¡ãƒ³ãƒãƒ¼å">
			    <input type="text" name="member_position[]" class="form-control mb-2" placeholder="ãƒã‚¸ã‚·ãƒ§ãƒ³: ãƒœãƒ¼ã‚«ãƒ«">
			    <input type="text" name="member_mbti[]" class="form-control mb-2" placeholder="MBTI: ENFP">
			    <input type="text" name="favorite_band[]" class="form-control mb-2" placeholder="å¥½ããªãƒãƒ³ãƒ‰: Aimer">
			    <input type="text" name="member_motto[]" class="form-control" placeholder="ä¸€è¨€: æ­Œã§ä¼ãˆãŸã„">
			  </div>
			</div>

		  <!-- ì¶”ê°€ ë©¤ë²„ ë²„íŠ¼ -->
		  <div>
		    <button type="button" id="addGeneralMemberBtn" class="btn btn-secondary mt-3">ï¼‹ ãƒ¡ãƒ³ãƒãƒ¼è¿½åŠ </button>
		    <small class="text-muted d-block mt-2">â€» ãƒ¡ãƒ³ãƒãƒ¼ã¯ä½•äººã§ã‚‚è¿½åŠ ã§ãã¾ã™ã€‚</small>
		  </div>

		  <!-- í˜ì´ì§€ ì´ë™/ì œì¶œ ë²„íŠ¼ -->
		  <div class="text-center mt-4" style="padding-top: 80px;">
		    <button type="button" class="btn btn-default" id="toPage2">ä»¥å‰ã¸</button>
		    <button type="submit" class="btn btn-primary" id="submitApply">ç™»éŒ²ã™ã‚‹</button>
		  </div>
		</div>
    </form>
  </div>
</div>
  </div>
</div>
</div>
    <!-- í˜ì´ì§• -->
    <div class="board-pagination">
      <button class="page-btn active">1</button>
      <button class="page-btn">2</button>
      <button class="page-btn">3</button>
      <button class="page-btn">&raquo;</button>
    </div>

<!-- ğŸ” ë©¤ë²„ ê²€ìƒ‰ íŒì—… -->
<div id="memberSearchPopup" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="memberSearchLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content" style="padding: 30px;">
      <div class="modal-header">
        <h4 class="modal-title" id="memberSearchLabel">ãƒ¡ãƒ³ãƒãƒ¼æ¤œç´¢</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="position: absolute; top: 10px; right: 16px; font-size: 24px;">&times;</button>
      </div>
      <div class="modal-body">
        <input type="text" id="memberSearchInput" class="form-control mb-3" placeholder="åå‰ã§æ¤œç´¢">
		<ul id="memberSearchResult" class="list-group">
		  <li class="list-group-item member-result-item"
		      th:each="user : ${memberList}"
		      th:data-name="${user.stage_name}"
		      th:data-image="@{'/upload/' + ${user.photo}}">

		    <img th:src="@{'/upload/' + ${user.photo}}"
		         th:alt="${user.stage_name}"
		         style="width: 30px; height: 30px; border-radius: 50%; margin-right: 8px;">

		    <span th:text="${user.stage_name}">ã‚¹ãƒ†ãƒ¼ã‚¸å</span>
		  </li>
		</ul>
      </div>
    </div>
  </div>
</div>
<script>
document.addEventListener("DOMContentLoaded", function () {
  // âœ… íƒ­ ì „í™˜ (ì„ íƒì‚¬í•­)
  $('.list-sort-tabs .list').click(function () {
    $('.list-sort-tabs .list').removeClass('active');
    $(this).addClass('active');
  });

  // âœ… ëª¨ë‹¬ ì—´ê¸° ë²„íŠ¼
  $('#openApplyModal').on('click', function () {
    $('#applyModal').modal('show');
  });

  // âœ… í˜ì´ì§€ ì „í™˜
  const page1 = document.getElementById("page1");
  const page2 = document.getElementById("page2");
  const page3 = document.getElementById("page3");

  const nextPageBtn = document.getElementById("nextPage");
  const prevPageBtn = document.getElementById("prevPage");
  const toPage3Btn = document.getElementById("toPage3");
  const toPage2Btn = document.getElementById("toPage2");

  if (nextPageBtn) {
    nextPageBtn.addEventListener("click", function () {
      page1.style.display = "none";
      page2.style.display = "block";
      page3.style.display = "none";
    });
  }

  if (prevPageBtn) {
    prevPageBtn.addEventListener("click", function () {
      page1.style.display = "block";
      page2.style.display = "none";
      page3.style.display = "none";
    });
  }

  if (toPage3Btn) {
    toPage3Btn.addEventListener("click", function () {
      page1.style.display = "none";
      page2.style.display = "none";
      page3.style.display = "block";
    });
  }

  if (toPage2Btn) {
    toPage2Btn.addEventListener("click", function () {
      page1.style.display = "none";
      page2.style.display = "block";
      page3.style.display = "none";
    });
  }

  // âœ… ì¼ë°˜ ë©¤ë²„ ì¶”ê°€
  const addBtn = document.getElementById("addGeneralMemberBtn");
  const container = document.getElementById("general-members");
  let memberCount = 3;

  if (addBtn && container) {
    addBtn.addEventListener("click", function () {
      const group = document.createElement("div");
      group.classList.add("member-input-group", "mt-3");
      group.innerHTML = `
        <label>ãƒ¡ãƒ³ãƒãƒ¼${memberCount}</label>
        <input type="file" name="memberImage[]" class="form-control mb-2">
        <input type="text" name="memberName[]" class="form-control mb-2" placeholder="ä¾‹: ãƒ¡ãƒ³ãƒãƒ¼å">
        <input type="text" name="memberPosition[]" class="form-control mb-2" placeholder="ãƒã‚¸ã‚·ãƒ§ãƒ³: ãƒœãƒ¼ã‚«ãƒ«">
        <input type="text" name="memberMbti[]" class="form-control mb-2" placeholder="MBTI: ENFP">
        <input type="text" name="memberFavoriteBand[]" class="form-control mb-2" placeholder="å¥½ããªãƒãƒ³ãƒ‰: Aimer">
        <input type="text" name="memberMotto[]" class="form-control" placeholder="ä¸€è¨€: æ­Œã§ä¼ãˆãŸã„">
      `;
      container.appendChild(group);
      memberCount++;
    });
  }

  // âœ… íƒœê·¸ ìƒ‰ìƒ í† ê¸€ë§Œ ìˆ˜í–‰ (ì¶œë ¥ ì œê±°)
  document.querySelectorAll(".tag").forEach(tag => {
    tag.addEventListener("click", function () {
      tag.classList.toggle("active");
    });
  });

  // âœ… í¼ ì œì¶œ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
  const form = document.getElementById("applyForm");
  if (form) {
    form.addEventListener("submit", function (e) {
      const getSelectedValues = (selector) => {
        return Array.from(document.querySelectorAll(`${selector} .tag.active`))
          .map(tag => tag.textContent.trim())
          .join(',');
      };

      document.getElementById("selectedGenres").value = getSelectedValues("#genre-tags");
      document.getElementById("selectedPositions").value = getSelectedValues("#position-tags");
      document.getElementById("selectedGenders").value = getSelectedValues("#gender-tags");
      document.getElementById("selectedAges").value = getSelectedValues("#age-tags");

    });
  }
});
</script>

<script>
	// âœ… ë¦¬ë” ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì‹œ íŒì—… ì—´ê¸°
	$(document).on('click', '.search-leader-btn', function () {
	  $('#memberSearchPopup').data('targetType', 'leader').modal('show');
	});

	// âœ… ì¼ë°˜ ë©¤ë²„ ê²€ìƒ‰ ë²„íŠ¼ í´ë¦­ ì‹œ íŒì—… ì—´ê¸°
	$(document).on('click', '.search-member-btn', function () {
	  const index = $(this).data('index');
	  $('#memberSearchPopup').data('targetType', 'general').data('targetIndex', index).modal('show');
	});

	// âœ… ê²€ìƒ‰ ê²°ê³¼ í´ë¦­ ì‹œ ë°ì´í„° ë°˜ì˜
	$(document).on('click', '.member-result-item', function () {
	  const name = $(this).data('name');
	  const image = $(this).data('image');
	  const targetType = $('#memberSearchPopup').data('targetType');

	  // âœ… ë¦¬ë”ì¼ ê²½ìš°
	  if (targetType === 'leader') {
	    const leaderContainer = $('.member-input-group.leader-member');

	    // ê°’ ë°˜ì˜
	    leaderContainer.find('input[name="photo"]').val(image); // hidden
	    leaderContainer.find('input[name="stage_name"]').val(name);

	    // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
	    leaderContainer.find('.selected-leader-info').html(`
	      <img src="${image}" class="member-image-preview mb-2"
	        style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover;" alt="ë¯¸ë¦¬ë³´ê¸°">
	    `);

	    $('#memberSearchPopup').modal('hide');
	    return;
	  }

	  // âœ… ì¼ë°˜ ë©¤ë²„ì¼ ê²½ìš°
	  if (targetType === 'general') {
	    const index = $('#memberSearchPopup').data('targetIndex');
	    const container = $(`#general-members .member-input-group.general-member:eq(${index})`);

	    // ì´ë¦„ ì…ë ¥
	    container.find('input[name="stage_name[]"]').val(name);

	    // ì´ë¯¸ì§€ë¥¼ ì €ì¥í•  hidden inputì´ ì—†ë‹¤ë©´ ì—¬ê¸° ì¶”ê°€í•´ì¤˜ì•¼ í•¨
	    let hidden = container.find('input[name="photo[]"]');
	    if (hidden.length === 0) {
	      hidden = $('<input type="hidden" name="photo[]">');
	      container.append(hidden);
	    }
	    hidden.val(image);

	    // ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
	    const preview = container.find('.member-image-preview');
	    if (preview.length > 0) {
	      preview.attr('src', image);
	    } else {
	      const imgTag = `<img src="${image}" class="member-image-preview mb-2"
	        style="width: 60px; height: 60px; border-radius: 50%; object-fit: cover;" alt="ë¯¸ë¦¬ë³´ê¸°">`;
	      container.find('.selected-member-info').after(imgTag);
	    }

	    $('#memberSearchPopup').modal('hide');
	  }
	});
</script>

<script>
  // âœ… ë©¤ë²„ ê²€ìƒ‰ì°½ì— ì…ë ¥í•  ë•Œë§ˆë‹¤ ì„œë²„ì— Ajax ìš”ì²­
  $('#memberSearchInput').on('input', function () {
    const keyword = $(this).val().trim();

    if (keyword.length === 0) {
      $('#memberSearchResult').empty();
      return;
    }

    $.ajax({
      url: '/bandinsert/membersearch',
      method: 'GET',
      data: { keyword: keyword },
      success: function (data) {
        const resultArea = $('#memberSearchResult');
        resultArea.empty(); // ê¸°ì¡´ ëª©ë¡ ì´ˆê¸°í™”

        if (data.length === 0) {
          resultArea.append('<li class="list-group-item">æ¤œç´¢çµæœãŒã‚ã‚Šã¾ã›ã‚“</li>');
        } else {
          data.forEach(function (user) {
            const item = `
              <li class="list-group-item member-result-item"
                  data-name="${user.stage_name}"
                  data-image="/upload/${user.photo}">
                <img src="/upload/${user.photo}" alt="${user.stage_name}"
                     style="width: 30px; height: 30px; border-radius: 50%; margin-right: 8px;">
                ${user.stage_name}
              </li>
            `;
            resultArea.append(item);
          });
        }
      },
      error: function () {
        alert('ãƒ¡ãƒ³ãƒãƒ¼æ¤œç´¢ã«å¤±æ•—ã—ã¾ã—ãŸã€‚');
      }
    });
  });
</script>



  </div>
</body>
</html>