<!DOCTYPE html>

<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultrag.net.nz/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">

<head>
	<title>ãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†</title>
	<link rel="stylesheet" href="/css/board-style.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>

<body>
	<div layout:fragment="content" class="board-container">
		<div class="modal-container"> <!-- í•˜ë‚˜ë¡œ ë¬¶ëŠ” div -->
		    <!-- ëª¨ë‹¬ ì—´ê¸° ë²„íŠ¼ -->
		    <div class="recruit-post-btn-wrap">
		        <button type="button" class="recruit-post-btn" id="openRecruitModal">ãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†ç™»éŒ²</button>
		    </div>

		    <!-- ğŸ” ë°´ë“œ ì„ íƒ íŒì—… -->
		    <div id="selectBandModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="selectBandLabel">
		        <div class="modal-dialog" role="document">
		            <div class="modal-content" style="padding: 30px;">
		                <div class="modal-header">
		                    <h4 class="modal-title" id="selectBandLabel">ãƒãƒ³ãƒ‰ã‚’é¸æŠã—ã¦ãã ã•ã„</h4>
		                </div>
		                <div class="modal-body">
		                    <ul id="myBandList" class="list-group">
		                        <!-- ì—¬ê¸°ì— JSë¡œ ë°´ë“œ ëª©ë¡ ì‚½ì… -->
		                    </ul>
		                </div>
		            </div>
		        </div>
		    </div>
		</div>

		<h2 class="board-title">ãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†</h2>
		<!-- ğŸ” ê²€ìƒ‰ì°½ -->
		<div class="search-bar">
			<form method="get" th:action="@{/bandlist/list}" style="display: contents;">
			    <input type="text" class="search-input" name="keyword" placeholder="ãƒãƒ¼ãƒ åæ¤œç´¢" th:value="${keyword}">
			    <button type="submit" class="search-btn">æ¤œç´¢</button>
			  </form>
			</div>
			
		<!-- â­ ìë™ ìŠ¬ë¼ì´ë” ì„¹ì…˜ ì‹œì‘ -->
		<div class="autoscroll-wrapper">
		  <div class="autoscroll-track">
		    <div class="slider-card" th:each="post : ${sliderPostList}">
		      <!-- ë§ˆê°ì¼ ë±ƒì§€ -->
		      <div class="deadline-badge list-version" th:if="${post.deadline != null}">
		        <span class="deadline-text"
		              th:attr="data-deadline=${#dates.format(post.deadline, 'yyyy-MM-dd')}">D-?</span>
		      </div>

		      <!-- ì´ë¯¸ì§€ í´ë¦­ ì‹œ ìƒì„¸ í˜ì´ì§€ ì´ë™ -->
			  <a th:href="@{'/bandselect/view?postId=' + ${post.post_id}}">
		            <img th:src="@{${post.image1Url != null ? '/images/uploads/bands/' + post.image1Url : '/images/default.png'}}"
		                 alt="ì¸ë„¤ì¼" class="card-image" /></a>

		      <!-- ì¹´ë“œ ë³¸ë¬¸ ì •ë³´ -->
		      <div class="card-info">
		        <p><strong>ã‚¿ã‚¤ãƒˆãƒ« :</strong> <span th:text="${post.title}">ì œëª©</span></p>
		        <p><strong>ãƒãƒ³ãƒ‰ç´¹ä»‹ :</strong> <span th:text="${post.band_intro}">ì†Œê°œ</span></p>
		        <p><strong>ãƒãƒ³ãƒ‰å :</strong> <span th:text="${post.band_name}">ë°´ë“œëª…</span></p>
		        <p class="card-meta">
		          <span th:text="${#dates.format(post.createdAt, 'yyyy.MM.dd')}">ì‘ì„±ì¼</span>
			        </p>
			      </div>
			    </div>
			  </div>
			</div>
			<!-- â­ ìë™ ìŠ¬ë¼ì´ë” ì„¹ì…˜ ë -->
							
			<!-- êµ¬ë¶„ì„  + ì œëª© -->
			<div class="card-list-section-title">
			  <h3>ğŸ“‹ ç™»éŒ²ã•ã‚ŒãŸãƒ¡ãƒ³ãƒãƒ¼å‹Ÿé›†ä¸€è¦§</h3>
			</div>

		<!-- ì¹´ë“œ ëª©ë¡ -->
		<div class="board-card-grid">
		    <div class="board-card" th:each="post : ${postList}">
		        <!-- ë§ˆê°ì¼ ë±ƒì§€ (D-day ê³„ì‚°ìš©) -->
				<div class="deadline-badge list-version" th:if="${post.deadline != null}">
				  <span class="deadline-text"
				        th:attr="data-deadline=${#dates.format(post.deadline, 'yyyy-MM-dd')}">D-?</span>
				</div>

		        <!-- ì´ë¯¸ì§€ í´ë¦­ ì‹œ ìƒì„¸ í˜ì´ì§€ ì´ë™ -->
		        <a th:href="@{'/bandselect/view?postId=' + ${post.post_id}}">
		            <img th:src="@{${post.image1Url != null ? '/images/uploads/bands/' + post.image1Url : '/images/default.png'}}"
		                 alt="ì¸ë„¤ì¼" class="card-image" />
		        </a>

		        <!-- ì¹´ë“œ ë³¸ë¬¸ ì •ë³´ -->
		        <div class="card-info">
		            <p><strong>ã‚¿ã‚¤ãƒˆãƒ« :</strong> <span th:text="${post.title}">ì œëª©</span></p>
		            <p><strong>ãƒãƒ³ãƒ‰ç´¹ä»‹ :</strong> <span th:text="${post.band_intro}">ì†Œê°œ</span></p>
		            <p><strong>ãƒãƒ³ãƒ‰å :</strong> <span th:text="${post.band_name}">ë°´ë“œëª…</span></p>
		            <p class="card-meta">
		                <span th:text="${#dates.format(post.createdAt, 'yyyy.MM.dd')}">ì‘ì„±ì¼</span>
		            </p>
		        </div>
		    </div>
		</div>
		<!-- ì§€ì›í•˜ê¸° ëª¨ë‹¬ ë‚´ í¼ í˜ì´ì§• êµ¬ì¡° -->
		<!-- âœ… HTML êµ¬ì¡° -->
		<div class="modal fade" id="applyModal" tabindex="-1" role="dialog" aria-labelledby="applyModalLabel">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">

					<!-- í—¤ë” -->
					<div class="modal-header">
						<h4 class="modal-title" id="applyModalLabel">å‹Ÿé›†ç™»éŒ²ã®å†…å®¹ä½œæˆ</h4>
						<button type="button" class="close" id="applyModalCloseBtn" aria-label="Close">
						  <span aria-hidden="true">&times;</span>
						</button>
					</div>

					<!-- ë°”ë”” -->
					<div class="modal-body">
						<form id="applyForm" action="/bandlist/insert" method="post" enctype="multipart/form-data">

							<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
							
							<input type="hidden" name="selectedGenres" id="selectedGenres">
							<input type="hidden" name="selectedPositions" id="selectedPositions">
							<input type="hidden" name="selectedGenders" id="selectedGenders">
							<input type="hidden" name="selectedAges" id="selectedAges">

							<!-- âœ… í˜ì´ì§€ 1 -->
							<div class="form-page" id="page1">
								<!-- <div class="form-group">
								<label for="bandName">ãƒãƒ³ãƒ‰ã®ãƒãƒ¼ãƒ å</label> <input type="text"
									class="form-control" id="bandName" placeholder="Tomato Groove">
							</div> -->
							<div class="form-group">
							    <label for="bandIntro">ãƒãƒ³ãƒ‰ç´¹ä»‹</label>
								<textarea class="form-control" id="bandIntro" name="bandIntro" rows="2" placeholder="ç´¹ä»‹ã‚’ãŠé¡˜ã„ã—ã¾ã™"></textarea>
							</div>

								<!-- ë¦¬ë” 
							<div class="form-group">
								<label>ãƒªãƒ¼ãƒ€ãƒ¼</label>
								<div class="member-input-group">
									<input type="file" name="leaderImage"
										class="form-control mb-2"> <input type="text"
										name="leaderName" class="form-control" placeholder="ä¾‹: ã‚¬ãƒ ">
								</div>
							</div>

							<!-- ë©¤ë²„
							<div class="form-group">
								<label>ãƒ¡ãƒ³ãƒãƒ¼</label>
								<!-- ê¸°ë³¸ 1ëª… 
								<div class="member-input-group">
									<input type="file" name="memberImage[]"
										class="form-control mb-2"> <input type="text"
										name="memberName[]" class="form-control"
										placeholder="ä¾‹: ãƒ¡ãƒ³ãƒãƒ¼å">
								</div>-->
								<!-- ì¶”ê°€ ë©¤ë²„ ë“¤ì–´ê°€ëŠ” ì˜ì—­ 
								<div id="general-members"></div>-->
								<!-- ì¶”ê°€ ë²„íŠ¼ 
								<button type="button" id="addGeneralMemberBtn"
									class="btn btn-secondary mt-2">ï¼‹ ãƒ¡ãƒ³ãƒãƒ¼è¿½åŠ </button>
								<small class="text-muted">â€» ãƒ¡ãƒ³ãƒãƒ¼ã¯ä½•äººã§ã‚‚è¿½åŠ ã§ãã¾ã™ã€‚</small>
							</div> -->
								<div class="form-group">
									<label>ã‚¿ã‚¤ãƒˆãƒ«</label> <input type="text" class="form-control" id="bandTitle"
										name="title" placeholder="ä¾‹: ä¸€ç·’ã«éŸ³æ¥½ã‚’æ¥½ã—ã¿ã¾ã—ã‚‡ã†ï¼">
								</div>
								<div class="form-group">
									<label for="recruitPosition">å‹Ÿé›†ãƒã‚¸ã‚·ãƒ§ãƒ³</label> <input type="text" class="form-control"
										id="recruitPosition" name="recruitPosition" placeholder="ä¾‹ï¼›å¥³æ€§ãƒœãƒ¼ã‚«ãƒ«">
								</div>
								<div class="form-group">
									<label for="activityArea">æ´»å‹•åœ°åŸŸ</label> <input type="text" class="form-control"
										id="activityArea" name="activityArea" placeholder="ä¾‹ï¼›æ±äº¬">
								</div>
								<div class="form-group">
									<label for="recruitCondition">ã“ã‚“ãªäººã‚’æ¢ã—ã¦ã„ã¾ã™ï¼</label> <input type="text"
										class="form-control" id="recruitCondition" name="recruitCondition"
										placeholder="ä¾‹: 20ä»£ã€ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯é‡è¦–">
								</div>
								<div class="text-right">
									<button type="button" class="btn btn-primary" id="nextPage">æ¬¡ã¸</button>
								</div>
							</div>

							<!-- âœ… í˜ì´ì§€ 2 -->
							<div class="form-page" id="page2" style="display: none;">
								<div class="form-group">
									<label for="preferredGenres">å¥½ããªã‚¸ãƒ£ãƒ³ãƒ«</label> <input type="text" class="form-control"
										id="preferredGenres" name="preferredGenres" placeholder="ä¾‹: ã‚¢ã‚³ãƒ¼ã‚¹ãƒ†ã‚£ãƒƒã‚¯ã€ãƒãƒƒãƒ—">
								</div>
								<div class="form-group">
									<label for="leaderComment">ãƒªãƒ¼ãƒ€ãƒ¼ã®ã‚³ãƒ¡ãƒ³ãƒˆ</label>
									<textarea class="form-control" id="leaderComment" name="leaderComment" rows="2"
										placeholder="ç°¡å˜ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ :)"></textarea>
								</div>
								<!-- ëª¨ì§‘ ë§ˆê°ì¼ -->
								<div class="form-group">
									<label for="deadline">å‹Ÿé›†ã®ç· åˆ‡æ—¥</label> <input type="date" class="form-control"
										id="deadline" name="deadline" placeholder="ä¾‹ï¼š2024-05-30"> <small
										class="text-muted">â€» ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰æ—¥ä»˜ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</small>
								</div>
								<!-- ì…ë ¥ í¼ -->
								<div class="form-group" style="padding-top: 55px;">
									<label for="tags">ãŠã™ã™ã‚ã‚¿ã‚°</label>
									<input type="text" class="form-control" id="tags" name="tagKeywords"
										placeholder="#ã‚®ã‚¿ãƒ¼ #ã‚¸ãƒ£ã‚º" readonly style="cursor: pointer;">
								</div>

								<!-- âœ… ì¶”ì²œ íƒœê·¸ íŒì—…ì°½ -->
								<div id="genre-popup" class="keyword-popup" style="display: none;">
									<button id="genre-popup-close" class="popup-close" type="button">Ã—</button>
									<div class="keyword-box">

									  <!-- âœ… ã‚¸ãƒ£ãƒ³ãƒ« -->
									  <div class="keyword-row">
									    <div class="keyword-category">ã‚¸ãƒ£ãƒ³ãƒ«</div>
									    <div class="keyword-tags">
									      <span class="tag" data-category="ã‚¸ãƒ£ãƒ³ãƒ«">ãƒ­ãƒƒã‚¯</span>
									      <span class="tag" data-category="ã‚¸ãƒ£ãƒ³ãƒ«">ãƒãƒƒãƒ—</span>
									      <span class="tag" data-category="ã‚¸ãƒ£ãƒ³ãƒ«">ã‚¸ãƒ£ã‚º</span>
									      <span class="tag" data-category="ã‚¸ãƒ£ãƒ³ãƒ«">ãƒ’ãƒƒãƒ—ãƒ›ãƒƒãƒ—</span>
									      <span class="tag" data-category="ã‚¸ãƒ£ãƒ³ãƒ«">ã‚¯ãƒ©ã‚·ãƒƒã‚¯</span>
									      <span class="tag" data-category="ã‚¸ãƒ£ãƒ³ãƒ«">EDM</span>
									      <span class="tag" data-category="ã‚¸ãƒ£ãƒ³ãƒ«">ãã®ä»–</span>
									    </div>
									  </div>

									  <!-- âœ… ãƒã‚¸ã‚·ãƒ§ãƒ³ -->
									  <div class="keyword-row">
									    <div class="keyword-category">ãƒã‚¸ã‚·ãƒ§ãƒ³</div>
									    <div class="keyword-tags">
									      <span class="tag" data-category="ãƒã‚¸ã‚·ãƒ§ãƒ³">Voï¼ˆãƒœãƒ¼ã‚«ãƒ«ï¼‰</span>
									      <span class="tag" data-category="ãƒã‚¸ã‚·ãƒ§ãƒ³">Gtï¼ˆã‚®ã‚¿ãƒ¼ï¼‰</span>
									      <span class="tag" data-category="ãƒã‚¸ã‚·ãƒ§ãƒ³">Baï¼ˆãƒ™ãƒ¼ã‚¹ï¼‰</span>
									      <span class="tag" data-category="ãƒã‚¸ã‚·ãƒ§ãƒ³">Drï¼ˆãƒ‰ãƒ©ãƒ ï¼‰</span>
									      <span class="tag" data-category="ãƒã‚¸ã‚·ãƒ§ãƒ³">Kbï¼ˆã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ï¼‰</span>
									      <span class="tag" data-category="ãƒã‚¸ã‚·ãƒ§ãƒ³">ãã®ä»–</span>
									    </div>
									  </div>

									  <!-- âœ… æ€§åˆ¥ -->
									  <div class="keyword-row">
									    <div class="keyword-category">æ€§åˆ¥</div>
									    <div class="keyword-tags">
									      <span class="tag" data-category="æ€§åˆ¥">ç”·æ€§ãƒãƒ³ãƒ‰</span>
									      <span class="tag" data-category="æ€§åˆ¥">å¥³æ€§ãƒãƒ³ãƒ‰</span>
									      <span class="tag" data-category="æ€§åˆ¥">æ··æˆãƒãƒ³ãƒ‰</span>
									    </div>
									  </div>

									  <!-- âœ… å¹´é½¢ä»£ -->
									  <div class="keyword-row">
									    <div class="keyword-category">å¹´é½¢ä»£</div>
									    <div class="keyword-tags">
									      <span class="tag" data-category="å¹´é½¢ä»£">10ä»£</span>
									      <span class="tag" data-category="å¹´é½¢ä»£">20ä»£</span>
									      <span class="tag" data-category="å¹´é½¢ä»£">30ä»£</span>
									      <span class="tag" data-category="å¹´é½¢ä»£">40ä»£</span>
									      <span class="tag" data-category="å¹´é½¢ä»£">50ä»£ä»¥ä¸Š</span>
									    </div>
									  </div>

									</div>
								</div>

							
								<!-- í™œë™ì‚¬ì§„ ì…ë ¥ë€ -->
								<div class="form-group">
								  <label>æ´»å‹•å†™çœŸ</label>
								  <div id="bandImagesContainer">
									<input type="file" name="bandImages" class="form-control mb-2">
								  </div>
								  <button type="button" id="addBandImageBtn" class="btn btn-secondary mt-2" style = "margin-top: 10px;">ï¼‹ å†™çœŸè¿½åŠ </button>
								  <small class="text-muted d-block mt-2">â€» æœ€å¤§ï¼”æšã®ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒç™»éŒ²å¯èƒ½ã§ã™ã€‚</small>
								</div>


								<div class="text-right" style="padding-top: 35px;">
									<div class="text-right" style="padding-top: 35px;">
										<button type="button" class="btn btn-primary" id="prevPage">ä»¥å‰ã¸</button>
										<button type="submit" class="btn btn-primary" id="submitRecruit">ç™»éŒ²ã™ã‚‹</button>
									</div>
								</div>
							</div>
						</form>
					</div>

				</div>
			</div>
		</div>

		<!-- í˜ì´ì§• -->
		<div class="board-pagination">
		    <!-- ì´ì „ í˜ì´ì§€ ë²„íŠ¼ -->
		    <a th:if="${currentPage > 1}"
		       th:href="@{'/bandlist/list'(page=${currentPage - 1})}"
		       class="page-btn">&laquo;</a>

		    <!-- í˜ì´ì§€ ë²ˆí˜¸ë“¤ -->
		    <a th:each="i : ${#numbers.sequence(1, totalPages)}"
		       th:href="@{'/bandlist/list'(page=${i})}"
		       th:class="'page-btn' + (${i} == ${currentPage} ? ' active' : '')"
		       th:text="${i}">1</a>

		    <!-- ë‹¤ìŒ í˜ì´ì§€ ë²„íŠ¼ -->
			<a th:if="${currentPage != null and currentPage < totalPages}"
			   th:href="@{'/bandlist/list'(page='__' + (${currentPage != null ? currentPage + 1 : 2}))}"
			   class="page-btn">&raquo;</a>

		</div>

		<script>
			document.addEventListener("DOMContentLoaded", function () {
				// ìµœì‹ ìˆœ, ì¸ê¸°ìˆœ íƒ­
				$('.list-sort-tabs .list').click(function () {
					$('.list-sort-tabs .list').removeClass('active');
					$(this).addClass('active');
				});

				// ëª¨ë‹¬ ì—´ê³  ë‹«ê¸°
				$('#openApplyModal').on('click', function () {
					$('#applyModal').modal('show');
				});
				$('#submitApply').on('click', function () {
					$('#applyModal').modal('hide');
				});

				// íƒœê·¸ í† ê¸€
				document.querySelectorAll(".tag").forEach(tag => {
					tag.addEventListener("click", function () {
						tag.classList.toggle("active"); // ìƒ‰ìƒ í† ê¸€ë§Œ ìˆ˜í–‰
					});
				});

				// í˜ì´ì§€ ì „í™˜
				document.getElementById("nextPage").addEventListener("click", function () {
					document.getElementById("page1").style.display = "none";
					document.getElementById("page2").style.display = "block";
				});
				document.getElementById("prevPage").addEventListener("click", function () {
					document.getElementById("page2").style.display = "none";
					document.getElementById("page1").style.display = "block";
				});

				// ì¼ë°˜ ë©¤ë²„ ì¶”ê°€
				const addBtn = document.getElementById("addGeneralMemberBtn");
				const container = document.getElementById("general-members");
				let memberCount = 2;

				if (addBtn && container) {
					addBtn.addEventListener("click", function () {
						const group = document.createElement("div");
						group.classList.add("member-input-group", "mt-3");
						group.innerHTML = `
    <label>ãƒ¡ãƒ³ãƒãƒ¼${memberCount}</label>
    <input type="file" name="memberImage[]" class="form-control mb-2">
    <input type="text" name="memberName[]" class="form-control" placeholder="ä¾‹: ãƒ¡ãƒ³ãƒãƒ¼å">
  `;
						container.appendChild(group);
						memberCount++;
					});
				}

				// í¼ ì œì¶œ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
				document.addEventListener("DOMContentLoaded", function () {
					const submitBtn = document.getElementById("submitRecruit");

					submitBtn.addEventListener("click", function (e) {
						e.preventDefault(); // ê¸°ë³¸ ì œì¶œ ë§‰ê³ 
						document.getElementById("applyForm").submit();
					});
				});

			});
		</script>

		<script>
			document.addEventListener("DOMContentLoaded", function () {
				const tagsInput = document.getElementById("tags");
				const genrePopup = document.getElementById("genre-popup");
				const popupCloseBtn = document.getElementById("genre-popup-close");

				// âœ… ì…ë ¥ í´ë¦­ ì‹œ íŒì—… ì—´ê¸°
				tagsInput.addEventListener("click", () => {
					genrePopup.style.display = "block";
				});

				// âœ… íŒì—… ë‹«ê¸° ë²„íŠ¼
				popupCloseBtn.addEventListener("click", () => {
					genrePopup.style.display = "none";
				});

				// íƒœê·¸ í´ë¦­ ì‹œ ë°˜ì˜ + ìŠ¤íƒ€ì¼ í† ê¸€ + ì„ íƒ ê°’ ì—…ë°ì´íŠ¸
				genrePopup.addEventListener("click", (e) => {
					if (e.target.classList.contains("tag")) {
						e.target.classList.toggle("active");

						const selected = Array.from(genrePopup.querySelectorAll(".tag.active"))
							.map(tag => tag.textContent.trim());

						tagsInput.value = selected.join(", ");
						updateSelectedTags();
					}
				});

			});
		</script>

		<script>
			document.addEventListener("DOMContentLoaded", function () {
				const tagsInput = document.getElementById("tags");
				const genrePopup = document.getElementById("genre-popup");
				const popupCloseBtn = document.getElementById("genre-popup-close");

				// âœ… ì¶”ì²œ íƒœê·¸ ì…ë ¥í¼ í´ë¦­ ì‹œ íŒì—… ì—´ê¸°
				tagsInput.addEventListener("click", () => {
					genrePopup.style.display = "block";
				});

				// âœ… íŒì—… ë‹«ê¸°
				popupCloseBtn.addEventListener("click", () => {
					genrePopup.style.display = "none";
				});

				// âœ… ì¶”ì²œ íƒœê·¸ íŒì—… ë‚´ íƒœê·¸ í´ë¦­
				genrePopup.addEventListener("click", (e) => {
					if (e.target.classList.contains("tag")) {
						e.target.classList.toggle("active");
						const selectedTags = Array.from(
							genrePopup.querySelectorAll(".tag.active")
						).map(tag => "#" + tag.textContent.trim());
						tagsInput.value = selectedTags.join(" ");
					}
				});

				// âœ… ê²€ìƒ‰ìš© í‚¤ì›Œë“œ íƒœê·¸ í´ë¦­ ì‹œ ì¹´ë“œ í•„í„°ë§
				document.querySelectorAll(".selected-tags .tag").forEach(tag => {
					tag.addEventListener("click", function () {
						const keyword = tag.textContent.trim();
						const cards = document.querySelectorAll(".board-card");

						cards.forEach(card => {
							// ê²€ìƒ‰ìš© íƒœê·¸ëŠ” tagsInputê³¼ ë¬´ê´€í•˜ê²Œ í•„í„°ë§ ìš”ì†Œë¡œë§Œ ì“°ì—¬ì•¼ í•¨
							const cardText = card.textContent;
							if (cardText.includes(keyword)) {
								card.style.display = "block";
							} else {
								card.style.display = "none";
							}
						});
					});
				});
			});
		</script>

		<script>
			function updateSelectedTags() {
				const activeTags = document.querySelectorAll(".keyword-box .tag.active");
				const genreTags = [];
				const positionTags = [];
				const genderTags = [];
				const ageTags = [];

				activeTags.forEach(tag => {
					const category = tag.closest(".keyword-row").querySelector(".keyword-category").textContent.trim();
					const value = tag.textContent.trim();

					if (category.includes("ã‚¸ãƒ£ãƒ³ãƒ«")) genreTags.push(value);
					else if (category.includes("ãƒã‚¸ã‚·ãƒ§ãƒ³")) positionTags.push(value);
					else if (category.includes("æ€§åˆ¥")) genderTags.push(value);
					else if (category.includes("å¹´é½¢ä»£")) ageTags.push(value);
				});

				document.getElementById("selectedGenres").value = genreTags.join(",");
				document.getElementById("selectedPositions").value = positionTags.join(",");
				document.getElementById("selectedGenders").value = genderTags.join(",");
				document.getElementById("selectedAges").value = ageTags.join(",");
			}

		</script>
		
		<script>
		  let selectedBandId = null; // ì„ íƒëœ band_idë¥¼ ì €ì¥í•  ë³€ìˆ˜

		  // ë°´ë“œ ì„ íƒ íŒì—… ì—´ê¸°
		  document.getElementById('openRecruitModal').addEventListener('click', function () {
		    fetch('/bandlist/mybands/all')
		      .then(response => response.json())
		      .then(bandList => {
		        const list = document.getElementById("myBandList");
		        list.innerHTML = "";

		        if (Array.isArray(bandList) && bandList.length > 0) {
		          bandList.forEach(band => {
		            const li = document.createElement("li");
		            li.className = "list-group-item";
		            li.style.cursor = "pointer";
		            li.textContent = band.band_name;
		            li.dataset.bandId = band.band_id;

		            li.addEventListener("click", () => {
		              selectedBandId = li.dataset.bandId; // ì „ì—­ ë³€ìˆ˜ì— ì €ì¥
		              console.log("ì„ íƒëœ band_id:", selectedBandId);
		              $('#selectBandModal').modal('hide');
		              $('#applyModal').modal('show');
		            });

		            list.appendChild(li);
		          });

		          $('#selectBandModal').modal('show');
		        } else {
		          alert("ç™»éŒ²ã•ã‚ŒãŸãƒãƒ³ãƒ‰ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšãƒãƒ³ãƒ‰ã‚’ç™»éŒ²ã—ã¦ãã ã•ã„ã€‚");
		        }
		      })
		      .catch(err => {
		        console.error("âŒ ë°´ë“œ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨:", err);
		      });
		  });
		  
		  document.addEventListener("DOMContentLoaded", function () {
		    const form = document.getElementById("applyForm");

		    if (form) {
		      form.addEventListener("submit", function (e) {
		        e.preventDefault(); // ê¸°ë³¸ ì œì¶œ ë§‰ìŒ

		        const formData = new FormData(form);

		        // ì„ íƒëœ band_id ì¶”ê°€
		        if (selectedBandId) {
		          formData.append("band_id", selectedBandId);
		        }

		        fetch(form.action, {
		          method: "POST",
		          body: formData
		        })
		          .then(res => {
		            if (res.redirected) {
		              alert("ç™»éŒ²ãŒå®Œäº†ã—ã¾ã—ãŸï¼");
		              window.location.href = res.url;
		            } else {
		              alert("ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸã€‚");
		            }
		          })
		          .catch(err => {
		            console.error("âŒ ë“±ë¡ ì˜¤ë¥˜:", err);
		            alert("ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚");
		          });
		      });
		    }
		  });


		</script>
		
		<script>
		  document.addEventListener("DOMContentLoaded", function () {
		    const maxImages = 4;
		    const container = document.getElementById("bandImagesContainer");
		    const addBtn = document.getElementById("addBandImageBtn");

		    addBtn.addEventListener("click", function () {
		      const currentCount = container.querySelectorAll('input[type="file"]').length;

		      if (currentCount >= maxImages) {
		        alert("æœ€å¤§4æšã¾ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯èƒ½ã§ã™ã€‚");
		        return;
		      }

		      const newInput = document.createElement("input");
		      newInput.type = "file";
		      newInput.name = "bandImages"; 
		      newInput.accept = "image/*";
		      newInput.className = "form-control mb-2";

		      container.appendChild(newInput);
		    });
		  });
		</script>
		
		<script>
			// í˜ì´ì§•
		document.addEventListener("DOMContentLoaded", function () {
		  const keyword = new URLSearchParams(window.location.search).get("keyword");

		  if (keyword) {
		      document.querySelectorAll(".board-pagination a").forEach(link => {
		        const url = new URL(link.href);
		        url.searchParams.set("keyword", keyword);
		        link.href = url.toString();
		      });
		    }
		  });
		</script>
		
		<script>
			document.addEventListener("DOMContentLoaded", function () {
			  // í˜ì´ì§€ê°€ ë¡œë“œë  ë•Œ keyword ì¿¼ë¦¬ ì œê±°
			  if (window.location.search.includes("keyword=")) {
			    const url = new URL(window.location.href);
			    url.searchParams.delete("keyword");
			    // history.replaceStateë¡œ URLë§Œ ë°”ê¾¸ê³  ìƒˆë¡œê³ ì¹¨ ì—†ì´ ì£¼ì†Œ ë³€ê²½
			    history.replaceState(null, '', url.pathname);
			  }
			});

		</script>
		
		<script>
			document.addEventListener('DOMContentLoaded', function () {
			    const deadlineElements = document.querySelectorAll('.deadline-text');

			    deadlineElements.forEach(function (el) {
			        const deadlineStr = el.getAttribute('data-deadline');
			        if (!deadlineStr) return;

			        const today = new Date();
			        const deadline = new Date(deadlineStr);
			        deadline.setHours(0, 0, 0, 0);
			        today.setHours(0, 0, 0, 0);

			        const diffTime = deadline - today;
			        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

			        if (diffDays > 0) {
			            el.textContent = `D-${diffDays}`;
			        } else if (diffDays === 0) {
			            el.textContent = 'D-Day';
			        } else {
			            el.textContent = 'ç· åˆ‡';
			        }
			    });
			});
		</script>

		<script>
			document.addEventListener("DOMContentLoaded", function () {
			  const closeBtn = document.getElementById("applyModalCloseBtn");
			  if (closeBtn) {
			    closeBtn.addEventListener("click", function () {
			      $('#applyModal').modal('hide'); // Bootstrap 3ìš© ìˆ˜ë™ ë‹«ê¸°
			    });
			  }
			});

		</script>
		
		<script>
			document.addEventListener("DOMContentLoaded", () => {
			  const track = document.querySelector(".autoscroll-track");
			  if (track) {
			    const cards = track.innerHTML;
			    track.innerHTML += cards; // ì¹´ë“œ 1ì„¸íŠ¸ë¥¼ ë°˜ë³µí•´ì„œ 2ë°°ë¡œ ë§Œë“¤ê¸°
			  }
			});

		</script>
		
		<script>
		  document.addEventListener("DOMContentLoaded", () => {
		    const sortButtons = document.querySelectorAll(".sort-btn");

		    sortButtons.forEach(button => {
		      button.addEventListener("click", () => {
		        sortButtons.forEach(btn => btn.classList.remove("active"));
		        button.classList.add("active");

		        const sortType = button.dataset.sort;
		        // ì˜ˆì‹œ: location.href = `/bandlist/list?sort=${sortType}`;
		        console.log("ì„ íƒëœ ì •ë ¬ ê¸°ì¤€:", sortType);
		      });
		    });
		  });
		</script>
		
		<script>
		  document.getElementById('bandImages').addEventListener('change', function () {
		    const fileNameSpan = document.querySelector('.custom-file-upload .file-name');
		    const fileName = this.files.length > 0 ? this.files[0].name : 'é¸æŠã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Šã¾ã›ã‚“';
		    fileNameSpan.textContent = fileName;
		  });
		</script>


	</div>

</body>

</html>